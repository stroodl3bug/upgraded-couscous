!function(e){"function"==typeof define&&define.amd?define(["core-js/stable"],e):e()}((function(){"use strict";var e,t,n,i,s,o,l={},r=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function h(e,t,n){var i,s=arguments,o={};for(i in t)"key"!==i&&"ref"!==i&&(o[i]=t[i]);if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(s[i]);if(null!=n&&(o.children=n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===o[i]&&(o[i]=e.defaultProps[i]);return d(e,o,t&&t.key,t&&t.ref,null)}function d(t,n,i,s,o){var l={type:t,props:n,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return null==o&&(l.__v=l),e.vnode&&e.vnode(l),l}function u(e){return e.children}function _(e,t){this.props=e,this.context=t}function f(e,t){if(null==t)return e.__?f(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?f(e):null}function y(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return y(e)}}function g(o){(!o.__d&&(o.__d=!0)&&t.push(o)&&!n++||s!==e.debounceRendering)&&((s=e.debounceRendering)||i)(v)}function v(){for(var e;n=t.length;)e=t.sort((function(e,t){return e.__v.__b-t.__v.__b})),t=[],e.some((function(e){var t,n,i,s,o,l,r;e.__d&&(l=(o=(t=e).__v).__e,(r=t.__P)&&(n=[],(i=c({},o)).__v=i,s=x(r,o,i,t.__n,void 0!==r.ownerSVGElement,null,n,null==l?f(o):l),S(n,o),s!=l&&y(o)))}))}function m(e,t,n,i,s,o,a,c,h,_){var y,g,v,m,w,b,k,S,$,D=i&&i.__k||r,T=D.length;for(h==l&&(h=null!=a?a[0]:T?f(i,0):null),n.__k=[],y=0;y<t.length;y++)if(null!=(m=n.__k[y]=null==(m=t[y])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m?d(null,m,null,null,m):Array.isArray(m)?d(u,{children:m},null,null,null):null!=m.__e||null!=m.__c?d(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(v=D[y])||v&&m.key==v.key&&m.type===v.type)D[y]=void 0;else for(g=0;g<T;g++){if((v=D[g])&&m.key==v.key&&m.type===v.type){D[g]=void 0;break}v=null}if(w=x(e,m,v=v||l,s,o,a,c,h,_),(g=m.ref)&&v.ref!=g&&(S||(S=[]),v.ref&&S.push(v.ref,null,m),S.push(g,m.__c||w,m)),null!=w){if(null==k&&(k=w),$=void 0,void 0!==m.__d)$=m.__d,m.__d=void 0;else if(a==v||w!=h||null==w.parentNode){e:if(null==h||h.parentNode!==e)e.appendChild(w),$=null;else{for(b=h,g=0;(b=b.nextSibling)&&g<T;g+=2)if(b==w)break e;e.insertBefore(w,h),$=h}"option"==n.type&&(e.value="")}h=void 0!==$?$:w.nextSibling,"function"==typeof n.type&&(n.__d=h)}else h&&v.__e==h&&h.parentNode!=e&&(h=f(v))}if(n.__e=k,null!=a&&"function"!=typeof n.type)for(y=a.length;y--;)null!=a[y]&&p(a[y]);for(y=T;y--;)null!=D[y]&&P(D[y],D[y]);if(S)for(y=0;y<S.length;y++)C(S[y],S[++y],S[++y])}function w(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===a.test(t)?n+"px":null==n?"":n}function b(e,t,n,i,s){var o,l,r,a,c;if(s?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(o=e.style,"string"==typeof n)o.cssText=n;else{if("string"==typeof i&&(o.cssText="",i=null),i)for(a in i)n&&a in n||w(o,a,"");if(n)for(c in n)i&&n[c]===i[c]||w(o,c,n[c])}else"o"===t[0]&&"n"===t[1]?(l=t!==(t=t.replace(/Capture$/,"")),r=t.toLowerCase(),t=(r in e?r:t).slice(2),n?(i||e.addEventListener(t,k,l),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,k,l)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!s&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function k(t){this.l[t.type](e.event?e.event(t):t)}function x(t,n,i,s,o,l,r,a,p){var h,d,f,y,g,v,w,b,k,x,S,C=n.type;if(void 0!==n.constructor)return null;(h=e.__b)&&h(n);try{e:if("function"==typeof C){if(b=n.props,k=(h=C.contextType)&&s[h.__c],x=h?k?k.props.value:h.__:s,i.__c?w=(d=n.__c=i.__c).__=d.__E:("prototype"in C&&C.prototype.render?n.__c=d=new C(b,x):(n.__c=d=new _(b,x),d.constructor=C,d.render=D),k&&k.sub(d),d.props=b,d.state||(d.state={}),d.context=x,d.__n=s,f=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=C.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=c({},d.__s)),c(d.__s,C.getDerivedStateFromProps(b,d.__s))),y=d.props,g=d.state,f)null==C.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==C.getDerivedStateFromProps&&b!==y&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,x),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,x)||n.__v===i.__v){for(d.props=b,d.state=d.__s,n.__v!==i.__v&&(d.__d=!1),d.__v=n,n.__e=i.__e,n.__k=i.__k,d.__h.length&&r.push(d),h=0;h<n.__k.length;h++)n.__k[h]&&(n.__k[h].__=n);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,x),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(y,g,v)}))}d.context=x,d.props=b,d.state=d.__s,(h=e.__r)&&h(n),d.__d=!1,d.__v=n,d.__P=t,h=d.render(d.props,d.state,d.context),null!=d.getChildContext&&(s=c(c({},s),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(v=d.getSnapshotBeforeUpdate(y,g)),S=null!=h&&h.type==u&&null==h.key?h.props.children:h,m(t,Array.isArray(S)?S:[S],n,i,s,o,l,r,a,p),d.base=n.__e,d.__h.length&&r.push(d),w&&(d.__E=d.__=null),d.__e=!1}else null==l&&n.__v===i.__v?(n.__k=i.__k,n.__e=i.__e):n.__e=$(i.__e,n,i,s,o,l,r,p);(h=e.diffed)&&h(n)}catch(t){n.__v=null,e.__e(t,n,i)}return n.__e}function S(t,n){e.__c&&e.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(e){e.call(n)}))}catch(t){e.__e(t,n.__v)}}))}function $(e,t,n,i,s,o,a,c){var p,h,d,u,_,f=n.props,y=t.props;if(s="svg"===t.type||s,null!=o)for(p=0;p<o.length;p++)if(null!=(h=o[p])&&((null===t.type?3===h.nodeType:h.localName===t.type)||e==h)){e=h,o[p]=null;break}if(null==e){if(null===t.type)return document.createTextNode(y);e=s?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,y.is&&{is:y.is}),o=null,c=!1}if(null===t.type)f!==y&&e.data!=y&&(e.data=y);else{if(null!=o&&(o=r.slice.call(e.childNodes)),d=(f=n.props||l).dangerouslySetInnerHTML,u=y.dangerouslySetInnerHTML,!c){if(null!=o)for(f={},_=0;_<e.attributes.length;_++)f[e.attributes[_].name]=e.attributes[_].value;(u||d)&&(u&&d&&u.__html==d.__html||(e.innerHTML=u&&u.__html||""))}(function(e,t,n,i,s){var o;for(o in n)"children"===o||"key"===o||o in t||b(e,o,null,n[o],i);for(o in t)s&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||b(e,o,t[o],n[o],i)})(e,y,f,s,c),u?t.__k=[]:(p=t.props.children,m(e,Array.isArray(p)?p:[p],t,n,i,"foreignObject"!==t.type&&s,o,a,l,c)),c||("value"in y&&void 0!==(p=y.value)&&p!==e.value&&b(e,"value",p,f.value,!1),"checked"in y&&void 0!==(p=y.checked)&&p!==e.checked&&b(e,"checked",p,f.checked,!1))}return e}function C(t,n,i){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,i)}}function P(t,n,i){var s,o,l;if(e.unmount&&e.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||C(s,null,n)),i||"function"==typeof t.type||(i=null!=(o=t.__e)),t.__e=t.__d=void 0,null!=(s=t.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(t){e.__e(t,n)}s.base=s.__P=null}if(s=t.__k)for(l=0;l<s.length;l++)s[l]&&P(s[l],n,i);null!=o&&p(o)}function D(e,t,n){return this.constructor(e,n)}e={__e:function(e,t){for(var n,i;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(i=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(i=!0,n.componentDidCatch(e)),i)return g(n.__E=n)}catch(t){e=t}throw e}},_.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&c(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),g(this))},_.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g(this))},_.prototype.render=u,t=[],n=0,i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,o=l;var T=function(e,t,n,i){var s;t[0]=0;for(var o=1;o<t.length;o++){var l=t[o++],r=t[o]?(t[0]|=l?1:2,n[t[o++]]):t[++o];3===l?i[0]=r:4===l?i[1]=Object.assign(i[1]||{},r):5===l?(i[1]=i[1]||{})[t[++o]]=r:6===l?i[1][t[++o]]+=r+"":l?(s=e.apply(r,T(e,r,n,["",null])),i.push(s),r[0]?t[0]|=2:(t[o-2]=0,t[o]=s)):i.push(r)}return i},N=new Map;function E(e){var t=N.get(this);return t||(t=new Map,N.set(this,t)),(t=T(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,i=1,s="",o="",l=[0],r=function(e){1===i&&(e||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,e,s):3===i&&(e||s)?(l.push(3,e,s),i=2):2===i&&"..."===s&&e?l.push(4,e,0):2===i&&s&&!e?l.push(5,0,!0,s):i>=5&&((s||!e&&5===i)&&(l.push(i,0,s,n),i=6),e&&(l.push(i,e,0,n),i=6)),s=""},a=0;a<e.length;a++){a&&(1===i&&r(),r(a));for(var c=0;c<e[a].length;c++)t=e[a][c],1===i?"<"===t?(r(),l=[l],i=3):s+=t:4===i?"--"===s&&">"===t?(i=1,s=""):s=t+s[0]:o?t===o?o="":s+=t:'"'===t||"'"===t?o=t:">"===t?(r(),i=1):i&&("="===t?(i=5,n=s,s=""):"/"===t&&(i<5||">"===e[a][c+1])?(r(),3===i&&(l=l[0]),i=l,(l=l[0]).push(2,0,i),i=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(r(),i=2):s+=t),3===i&&"!--"===s&&(i=4,l=l[0])}return r(),l}(e)),t),arguments,[])).length>1?t:t[0]}const L=E.bind(h);class M extends _{constructor(){super(),this.state={selectedDevice:"-- choose mediaplayer --",castEntities:[]}}componentWillUnmount(){"function"==typeof this.unsubscribeEntitites&&this.unsubscribeEntitites()}async componentDidMount(){await this.refreshCastEntities(),this.dataRefreshToken=setInterval(async()=>{await this.refreshCastEntities()},5e3)}async refreshCastEntities(){const e=(await this.props.hass.callWS({type:"config/entity_registry/list"})).filter(e=>"cast"==e.platform).map(e=>this.props.hass.states[e.entity_id]).filter(e=>null!=e&&"unavailable"!=e.state);this.setState({castEntities:e})}componentWillUnmount(){clearInterval(this.dataRefreshToken)}componentWillReceiveProps(e,t){e.selectedDevice&&this.setState({selectedDevice:e.selectedDevice.name})}selectDevice(e){this.setState({selectedDevice:e.name}),this.props.onMediaplayerSelect(e)}selectChromecastDevice(e){this.props.onChromecastDeviceSelect(e)}render(){const{devices:e}=this.props,{castEntities:t}=this.state,n=L`
      <div class="dropdown-content">
        <a onClick=${()=>{}}><i>Spotify Connect devices</i></a>
        ${e.map((e,t)=>L`
            <a onClick=${()=>this.selectDevice(e)} style="margin-left: 15px">${e.name}</a>
          `)}
        <a onClick=${()=>{}}><i>Chromecast devices</i></a>
        ${t.map(e=>L`
            <a onClick=${()=>this.selectChromecastDevice(e.attributes.friendly_name)} style="margin-left: 15px"
              >${e.attributes.friendly_name}</a
            >
          `)}
      </div>
    `;let i="";if(this.props.player&&this.props.player==this.state.selectedDevice)i="";else if(this.props.player&&this.props.player!=this.state.selectedDevice){const t=e.filter(e=>e.name==this.props.player);1==t.length?(i="",this.selectDevice(t[0])):i=n}else i=n;return L`
    <div class="dropdown-wrapper">
      <div class="controls">
      <div class="dropdown">
        <div class="mediaplayer_select">
          <svg
            class="mediaplayer_speaker_icon"
            width="220"
            height="220"
            viewBox="0 0 220 220"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill="#c9c9c9"
              d="M197.766 112.275q0 56.608-34.867 105.006l-8.157-6.984q32.743-44.355 32.743-98.022 0-52.565-32.632-97.9l8.158-6.984q34.755 48.398 34.755 104.884zm-24.586 0q0 46.928-28.831 88.22l-8.158-6.74q26.708-38.228 26.708-81.48 0-43.13-26.708-81.359l8.158-6.74q28.831 40.435 28.831 88.099zm-24.585 0q0 37.126-22.908 71.434l-8.27-6.617q20.897-30.632 20.897-64.817 0-33.573-20.897-64.818l8.27-6.616q22.908 34.308 22.908 71.434zm-54.646 89.2l-52.634-53.3H8.125V76.374h33.302l52.522-53.177v178.278z"
              stroke="null"
            />
          </svg>
          ${this.state.selectedDevice}
        </div>
      </div>
      </div>
      ${i}
      </div>
    `}}const A=E.bind(h);class R extends _{constructor(e){super(e),this.dataRefreshToken=null,this.state={playlists:[],devices:[],playlists:[],selectedDevice:null,selectedPlaylist:null,currentPlayer:null,playingPlaylist:null,authenticationRequired:!0},this.scopes=["playlist-read-private","playlist-read-collaborative","user-read-playback-state","user-modify-playback-state"]}async componentDidMount(){document.addEventListener("visibilitychange",async()=>{document.hidden||await this.refreshPlayData()}),await this.checkAuthentication(),await this.refreshPlayData(),this.dataRefreshToken=setInterval(async()=>{await this.refreshPlayData()},1e4)}componentWillUnmount(){clearInterval(this.dataRefreshToken)}getLocalStorageTokenName(){return"spotify-access_token-"+(this.props.account?this.props.account:"default")}async checkAuthentication(){const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token")||localStorage.getItem(this.getLocalStorageTokenName()),n=localStorage.getItem(this.getLocalStorageTokenName()+"-expires_ms");if(t&&0+n-(new Date).getTime()>3e4&&!this.state.authenticationRequired)return void console.log("CheckAuth no check required: authenticationRequired, expires in:",n-(new Date).getTime());const i={Authorization:"Bearer "+t},s=await fetch("https://api.spotify.com/v1/me",{headers:i}).then(e=>e.json());if(s.error)return 401===s.error.status?t&&0+n-(new Date).getTime()<0?this.authenticateSpotify():this.setState({authenticationRequired:!0}):(console.error("This should never happen:",response),this.setState({error:response.error}));if(e.get("access_token")){const n=e.get("expires_in");localStorage.setItem(this.getLocalStorageTokenName(),t),localStorage.setItem(this.getLocalStorageTokenName()+"-expires_ms",(new Date).getTime()+1e3*n);const i=window.location.href.split("#")[0];window.history.pushState({path:i},"",i)}this.setState({authenticationRequired:!1})}async refreshPlayData(){if(document.hidden||this.state.authenticationRequired)return;await this.checkAuthentication();const e={Authorization:"Bearer "+localStorage.getItem(this.getLocalStorageTokenName())};let t;if(this.state.playlists.length>0)t=this.state.playlists;else if(this.props.featuredPlaylists){let n="https://api.spotify.com/v1/browse/featured-playlists?limit="+this.props.limit;""!==this.props.featuredPlaylistsCountryCode&&(n+="&country="+this.props.featuredPlaylistsCountryCode),t=await fetch(n,{headers:e}).then(e=>e.json()).then(e=>e.playlists.items)}else if(this.props.dailyMixes){const e=await this.props.hass.callWS({type:"spotcast/playlists",playlist_type:"discover-weekly"});console.log("HERE:",e),t=e.items}else t=await fetch("https://api.spotify.com/v1/me/playlists?limit="+this.props.limit,{headers:e}).then(e=>e.json()).then(e=>e.items);const n=await fetch("https://api.spotify.com/v1/me/player/devices",{headers:e}).then(e=>e.json()).then(e=>e.devices),i=await fetch("https://api.spotify.com/v1/me/player",{headers:e});let s,o=null,l=null;if(200===i.status&&(l=await i.json(),s=l.device,l.context&&l.context.external_urls)){const e=l.context.external_urls.spotify;o=t.find(t=>e===t.external_urls.spotify)}this.setState({playlists:t,devices:n,selectedDevice:s,playingPlaylist:o,currentPlayer:l})}authenticateSpotify(){const e=window.location.href.split("?")[0],{clientId:t}=this.props;window.location.href=`https://accounts.spotify.com/authorize?client_id=${t}&redirect_uri=${e}&scope=${this.scopes.join("%20")}&response_type=token`}playPlaylist(){const{selectedPlaylist:e,selectedDevice:t}=this.state;e&&t?fetch("https://api.spotify.com/v1/me/player/play?device_id="+t.id,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem(this.getLocalStorageTokenName())},body:JSON.stringify({context_uri:e.uri})}).then(()=>this.setState({playingPlaylist:e})):console.error("Will not play because there is no playlist or device selected,",e,t)}onPlaylistSelect(e){this.setState({selectedPlaylist:e}),this.playPlaylist()}onMediaPlayerSelect(e){this.setState({selectedDevice:e}),this.state.currentPlayer&&fetch("https://api.spotify.com/v1/me/player",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem(this.getLocalStorageTokenName())},body:JSON.stringify({device_ids:[e.id],play:!0})})}onChromecastDeviceSelect(e){const t=this.state.playingPlaylist?this.state.playingPlaylist:this.state.playlists[0];if(!t)return void console.error("Nothing to play, skipping starting chromecast device");console.log("onChromecastDeviceSelect",e);const n={device_name:e,uri:t.uri,force_playback:null!=this.state.currentPlayer,random_song:!!this.props.random_song&&this.props.random_song};this.props.account&&(n.account=this.props.account),this.props.hass.callService("spotcast","start",n)}getHighlighted(e){const{selectedPlaylist:t}=this.state,n=t?t.id:"";return e.id===n?"highlight":""}getIsPlayingClass(e){const{playingPlaylist:t}=this.state,n=t?t.id:"";return e.id===n?"playing":""}render(){const{authenticationRequired:e,playlists:t,devices:n,selectedDevice:i}=this.state;if(e)return A`
        <div class="spotify_container">
          <${I} />
          <div class="login__box">
            <button class="greenButton" onClick=${()=>this.authenticateSpotify()}>AUTHENTICATE</button>
          </div>
        </div>
      `;const s={height:this.props.height?parseInt(this.props.height):"auto"};return A`
      <div class="spotify_container">
        <${I} />
        <div class="playlists" style=${s}>
          ${t.map((e,t)=>{const n=e.images[0]?e.images[0].url:"https://via.placeholder.com/150x150.png?text=No+image";return A`
              <div
                class="${"playlist "+this.getHighlighted(e)}"
                onClick=${n=>this.onPlaylistSelect(e,t,n,this)}
              >
                <div class="playlist__cover_art"><img src="${n}" /></div>
                <div class="playlist__number">${t+1}</div>
                <div class="${"playlist__playicon "+this.getIsPlayingClass(e)}">►</div>
                <div class="playlist__title">${e.name}</div>
              </div>
            `})}
        </div>
          <${M}
            devices=${n}
            selectedDevice=${i}
            hass=${this.props.hass}
            player=${this.props.player}
            onMediaplayerSelect=${e=>this.onMediaPlayerSelect(e)}
            onChromecastDeviceSelect=${e=>this.onChromecastDeviceSelect(e)}
          />
        </div>
    `}}const I=()=>A`
  <div class="header">
    <img src="https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_White.png" />
  </div>
`
/**
   * @license
   * Copyright 2019 Niklas Fondberg<niklas.fondberg@gmail.com>. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */,U=E.bind(h),q=document.createElement("style"),W="rgb(30, 215, 96)",z="rgb(40, 40, 40)",B="rgb(24, 24, 24)",H="rgb(170, 170, 170)",j="rgb(200, 200, 200)",F="rgb(255, 255, 255)";q.textContent=`\n    .spotify_container {\n      background-color: ${z};\n      font-family: 'Roboto', sans-serif;\n      color:  ${F};\n      font-size: 14px;\n      padding: 25px;\n      height:auto;\n      overflow-y:auto;\n      position: relative;\n    }\n    .spotify_container *:focus {outline:none}\n    .header img {\n      height: 30px;\n      margin-bottom: 10px;\n    }\n    .login__box {\n      width: 100%;\n      text-align: center;\n    }\n    .playlists {\n      display: flex;\n      flex-flow: column nowrap;\n      margin-bottom: 15px;\n      overflow: auto;\n      background-color: ${B};\n    }\n    .playlist {\n      display: flex;\n      flex-flow: row nowrap;\n      align-items: center;\n      border-top: 1px solid ${z};\n    }\n    .playlist:active {\n      background-color: rgb(200, 200, 240);\n    }\n    .playlist:last-child {\n      border-bottom: 1px solid ${z};\n    }\n    .playlist:hover {\n      background: ${z};\n      cursor: pointer;\n    }\n    .highlight {\n      background: ${z};\n    }\n\n    .playlist__cover_art img {\n      width: 42px;\n      height: 42px;\n    }\n    .playlist__number {\n      margin-left: 10px;\n      color:  ${H};\n      width: 12px;\n    }\n\n    .playlist__playicon {\n      color: ${F};\n      margin-left: 10px;\n    }\n    .playlist__playicon:hover {\n      color: rgb(216, 255, 229);\n      text-shadow: 0 0 20px rgb(216, 255, 229);\n    }\n    .playing {\n      color: ${W}\n    }\n\n    .playlist__title {\n      margin-left: 30px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      max-width: 75vw;\n    }\n    .controls {\n      display: flex;\n      flex-flow: row nowrap;\n      align-items: center;\n      bottom: 0.5em;\n      position: absolute;\n    }\n    .greenButton {\n      border-radius: 15px;\n      padding: 0 20px 0 20px;\n      font-size: 14px;\n      height: 27px;\n      color: white;\n      border: none;\n      background: ${W};\n      cursor: pointer;\n      margin-right: 10px;\n    }\n    .greenButton:hover {\n      background-color: #43e57d;\n    }\n    .playButton::before {\n      content: "\\25B6  "\n    }\n\n    .dropdown {\n      position: relative;\n      display: inline-block;\n      color: ${j};\n    }\n    .mediaplayer_select {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .mediaplayer_speaker_icon {\n      display: inline-block;\n      padding: 3px;\n      width: 17px;\n      height: 17px;\n      margin-right: 10px;\n      border: thin solid ${j};\n      border-radius: 50%;\n    }\n    .dropdown-wrapper {\n      display: contents;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .dropdown-content {\n      display: none;\n      position: absolute;\n      left: 1em;\n      bottom: 0.5em;\n      max-height: calc(100% - 1em);\n      overflow-y: auto;\n      background-color: ${z};\n      min-width: 250px;\n      box-shadow: black 0 0 16px 0px;\n      z-index: 1;\n    }\n    .dropdown-content a {\n      color: ${j};\n      padding: 12px 16px;\n      text-decoration: none;\n      display: block;\n    }\n    .dropdown-content a:hover {\n      box-shadow: inset 0 0 100px 100px rgba(255, 255, 255, 0.07);\n    }\n    .controls:hover+.dropdown-content, .dropdown-content:hover {\n      display: block;\n    }\n`;class O extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.config={}}set hass(e){this.savedHass||(this.savedHass=e)}setConfig(e){if(!e.client_id)throw new Error("No client ---- id");this.config=e}getCardSize(){return 10}disconnectedCallback(){this.shadow.innerHTML=""}connectedCallback(){this.config.client_id||(this.config.client_id=this.getAttribute("client_id"));const t=document.createElement("div");this.shadow.appendChild(q.cloneNode(!0)),this.shadow.appendChild(t),function(t,n,i){var s,a,c;e.__&&e.__(t,n),a=(s=i===o)?null:i&&i.__k||n.__k,t=h(u,null,[t]),c=[],x(n,(s?n:i||n).__k=t,a||l,l,void 0!==n.ownerSVGElement,i&&!s?[i]:a?null:n.childNodes.length?r.slice.call(n.childNodes):null,c,i||l,s),S(c,t)}(U`
        <${R}
          clientId=${this.config.client_id}
          limit=${this.config.limit||10}
          player=${this.config.device||"*"}
          hass=${this.savedHass}
          featuredPlaylists=${this.config.featuredPlaylists||!1}
          featuredPlaylistsCountryCode=${this.config.featuredPlaylistsCountryCode||""}
          dailyMixes=${this.config.dailyMixes||!1}
          account=${this.config.account||""}
          height=${this.config.height||""}
          random_song=${this.config.random_song||!1}
        />
      `,t)}}customElements.define("spotify-card",O)}));
//# sourceMappingURL=spotify-card.js.map
